<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Configurações</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <app-configuracao-definicao></app-configuracao-definicao>
  <ion-list>
    <ion-list-header>Filtros</ion-list-header>
    <ion-item>
      <ion-label position="floating">Lucro acima de</ion-label>
      <ion-input
        type="number"
        inputmode="decimal"
        [(ngModel)]="configuracao.filtroLucroAcima"
        (change)="mudarLucro()"
      ></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="floating">Porcentagem de lucro acima de</ion-label>
      <ion-input
        type="number"
        inputmode="decimal"
        [(ngModel)]="configuracao.filtroPorcentagemLucroAcima"
        (change)="mudarPorcentagemLucro()"
      ></ion-input>
    </ion-item>
    <ion-item-group>
      <ion-item-divider>
        <ion-label>Corretoras</ion-label>
      </ion-item-divider>
      <ion-item *ngFor="let corretora of corretoras">
        <ion-label>{{ corretora.nome }}</ion-label>
        <ion-toggle
          slot="end"
          [(ngModel)]="configuracao.corretoras[corretora.id].habilitada"
          (ionChange)="mudarCorretoraHabilitada(corretora.id)"
        ></ion-toggle>
      </ion-item>
    </ion-item-group>
  </ion-list>

  <ion-list>
    <ion-list-header>Notificações</ion-list-header>
    <ion-item>
      <ion-label>Notificar</ion-label>
      <ion-toggle
        slot="end"
        [(ngModel)]="configuracao.permitirNotificar"
        (ionChange)="mudarPermitirNotificar()"
      ></ion-toggle>
    </ion-item>
    <ion-item>
      <ion-label position="floating">Tempo entre notificações</ion-label>
      <ion-input
        type="number"
        inputmode="numeric"
        [(ngModel)]="configuracao.tempoEntreNotificacoes"
        (change)="mudarTempoEntreNotificacoes()"
      ></ion-input>
      <ion-note>
        Após quantos minutos você poderá ser notificado novamente após ter
        recebido uma notificação não visualizada.
      </ion-note>
    </ion-item>
  </ion-list>

  <ion-list>
    <ion-list-header>Ordenar por</ion-list-header>
    <ion-reorder-group
      disabled="false"
      (ionItemReorder)="mudarOrdenacao($event)"
    >
      <ion-reorder *ngFor="let criterioOrdenacao of configuracao.ordenacao">
        <ion-item>
          <ion-label>{{ criterioOrdenacao.descricao }}</ion-label>
          <ion-icon slot="end" name="reorder"></ion-icon>
        </ion-item>
      </ion-reorder>
    </ion-reorder-group>
  </ion-list>
</ion-content>
